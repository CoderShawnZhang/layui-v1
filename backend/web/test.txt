<br><br>SET NAMES utf8mb4;</br>SET FOREIGN_KEY_CHECKS = 0;</br>DROP TABLE IF EXISTS `user`;</br></br>CREATE TABLE `auth_assignment` (
  `item_name` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `user_id` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `created_at` int(11) DEFAULT NULL,
  PRIMARY KEY (`item_name`,`user_id`),
  CONSTRAINT `auth_assignment_ibfk_1` FOREIGN KEY (`item_name`) REFERENCES `auth_item` (`name`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;<br><br>CREATE TABLE `auth_item` (
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `type` smallint(6) NOT NULL,
  `description` text COLLATE utf8_unicode_ci,
  `rule_name` varchar(64) COLLATE utf8_unicode_ci DEFAULT NULL,
  `data` blob,
  `created_at` int(11) DEFAULT NULL,
  `updated_at` int(11) DEFAULT NULL,
  PRIMARY KEY (`name`),
  KEY `rule_name` (`rule_name`),
  KEY `idx-auth_item-type` (`type`),
  CONSTRAINT `auth_item_ibfk_1` FOREIGN KEY (`rule_name`) REFERENCES `auth_rule` (`name`) ON DELETE SET NULL ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;<br><br>CREATE TABLE `auth_item_child` (
  `parent` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `child` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  PRIMARY KEY (`parent`,`child`),
  KEY `child` (`child`),
  CONSTRAINT `auth_item_child_ibfk_1` FOREIGN KEY (`parent`) REFERENCES `auth_item` (`name`) ON DELETE CASCADE ON UPDATE CASCADE,
  CONSTRAINT `auth_item_child_ibfk_2` FOREIGN KEY (`child`) REFERENCES `auth_item` (`name`) ON DELETE CASCADE ON UPDATE CASCADE
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;<br><br>CREATE TABLE `auth_rule` (
  `name` varchar(64) COLLATE utf8_unicode_ci NOT NULL,
  `data` blob,
  `created_at` int(11) DEFAULT NULL,
  `updated_at` int(11) DEFAULT NULL,
  PRIMARY KEY (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8 COLLATE=utf8_unicode_ci;<br><br>CREATE TABLE `image` (
  `id` int(10) NOT NULL AUTO_INCREMENT,
  `src` varchar(200) DEFAULT NULL,
  `name` varchar(100) DEFAULT NULL,
  `size` varchar(50) DEFAULT NULL,
  `width` int(10) DEFAULT NULL,
  `height` int(10) DEFAULT NULL,
  `base64` text,
  `status` tinyint(1) DEFAULT NULL,
  `imageFiles` text,
  `imageFile` varchar(255) DEFAULT NULL,
  PRIMARY KEY (`id`)
) ENGINE=InnoDB AUTO_INCREMENT=22 DEFAULT CHARSET=utf8;<br><br>CREATE TABLE `migration` (
  `version` varchar(180) NOT NULL,
  `apply_time` int(11) DEFAULT NULL,
  PRIMARY KEY (`version`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;<br><br>CREATE TABLE `orders` (
  `orderId` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '订单索引id',
  `orderSn` bigint(20) unsigned NOT NULL COMMENT '订单编号',
  `pId` int(11) DEFAULT '0' COMMENT '父ID',
  `kind` tinyint(1) DEFAULT '0' COMMENT '订单类型（0：正常；1：补货；2：重提）',
  `orderCommand` varchar(20) DEFAULT NULL COMMENT '订单口令',
  `vendorCode` varchar(20) NOT NULL DEFAULT '' COMMENT '加盟商编号',
  `buyerName` varchar(24) NOT NULL DEFAULT '' COMMENT '买家姓名',
  `buyerMobile` varchar(20) NOT NULL DEFAULT '' COMMENT '买家手机',
  `orderType` tinyint(4) DEFAULT '1' COMMENT '订单类型',
  `orderAmount` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '订单总价格',
  `discountAmount` decimal(10,2) DEFAULT NULL COMMENT '折后金额',
  `discount` decimal(10,2) DEFAULT '100.00' COMMENT '折扣',
  `discountReason` varchar(500) DEFAULT NULL COMMENT '打折原因',
  `customDiscountAmount` decimal(10,2) DEFAULT '0.00' COMMENT '客户折扣金额',
  `earnest` decimal(10,2) unsigned NOT NULL DEFAULT '0.00' COMMENT '订单定金',
  `earnestState` tinyint(4) NOT NULL DEFAULT '0' COMMENT '定金状态，0待付，1已付',
  `orderState` tinyint(4) NOT NULL DEFAULT '0' COMMENT '订单状态',
  `orderStateLog` varchar(2000) DEFAULT '' COMMENT '订单状态信息',
  `isDel` tinyint(4) NOT NULL DEFAULT '0' COMMENT '删除状态:0未删除，1删除',
  `orderFrom` tinyint(4) NOT NULL DEFAULT '1' COMMENT '1PC,2Ipad,3Terminal',
  `finnshedTime` int(11) unsigned NOT NULL DEFAULT '0' COMMENT '订单完成时间',
  `subOrderCount` int(6) DEFAULT '0' COMMENT '子订单总任务数',
  `finishSubCount` int(6) DEFAULT '0' COMMENT '完成的任务数',
  `salesId` int(11) NOT NULL DEFAULT '0' COMMENT '导购id',
  `deliveryAddress` text COMMENT '收货地址',
  `creater` char(24) DEFAULT '' COMMENT '创建人',
  `created` int(11) DEFAULT '0' COMMENT '创建时间',
  `modifier` char(24) DEFAULT '' COMMENT '修改人',
  `modified` int(11) DEFAULT '0' COMMENT '修改时间',
  `isPurchases` int(1) DEFAULT '0' COMMENT '是否已采购 0：否 1：是',
  `relationOrdersSn` bigint(20) DEFAULT NULL COMMENT '关联主材包',
  `receiveName` varchar(24) DEFAULT NULL COMMENT '客户地址收货人',
  `receiveMobile` varchar(20) DEFAULT NULL COMMENT '客户地址收货电话',
  `orderBusinessType` tinyint(2) DEFAULT '0' COMMENT '主材包业务类型（0:398业务，1:518业务）',
  `purchasesType` tinyint(2) DEFAULT '0' COMMENT '采购类型 0:常规集采 1:仓库破损补货',
  PRIMARY KEY (`orderId`),
  UNIQUE KEY `orderSn` (`orderSn`),
  KEY `buyerName` (`buyerName`) USING BTREE,
  KEY `buyerMobile` (`buyerMobile`) USING BTREE,
  KEY `orderType` (`orderType`) USING BTREE,
  KEY `vendorCode` (`vendorCode`) USING BTREE,
  KEY `orderState` (`orderState`) USING BTREE,
  KEY `salesId` (`salesId`) USING BTREE,
  KEY `orderFrom` (`orderFrom`) USING BTREE,
  KEY `created` (`created`) USING BTREE,
  KEY `isDel` (`isDel`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=18691 DEFAULT CHARSET=utf8 COMMENT='订单主表';<br><br>CREATE TABLE `setting` (
  `name` varchar(20) NOT NULL,
  `value` varchar(50) DEFAULT NULL,
  `title` varchar(20) DEFAULT NULL,
  PRIMARY KEY (`name`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;<br><br>CREATE TABLE `user` (
  `id` int(11) unsigned NOT NULL AUTO_INCREMENT COMMENT '用户Id',
  `name` char(24) NOT NULL DEFAULT '' COMMENT '用户名',
  `password` char(255) DEFAULT '' COMMENT '用户密码',
  `mobile` char(20) DEFAULT '' COMMENT '用户手机',
  `status` tinyint(1) DEFAULT '0' COMMENT '用户状态 0 正常 1 停用 2 锁定',
  `type` tinyint(1) DEFAULT '0' COMMENT '用户类型 1 客服 2 加盟商 3 供应商',
  `remark` char(255) DEFAULT '' COMMENT '用户备注',
  `avatar` char(255) DEFAULT '' COMMENT '用户头像',
  `role` tinyint(1) DEFAULT '0' COMMENT '用户角色',
  `creater` char(24) DEFAULT '' COMMENT '创建人',
  `created` int(11) unsigned DEFAULT '0' COMMENT '创建时间',
  `modifier` char(24) DEFAULT '' COMMENT '修改人',
  `modified` int(11) unsigned DEFAULT '0' COMMENT '修改时间',
  `isDel` tinyint(1) DEFAULT '0' COMMENT '软删除 0 未删除 1 删除',
  `refId` int(11) unsigned DEFAULT '0' COMMENT '外键链接',
  `lockTime` int(11) DEFAULT '0' COMMENT '用户锁定时间',
  `access_token` varchar(100) DEFAULT NULL COMMENT '认证密钥',
  `auth_key` varchar(255) DEFAULT NULL,
  `belong` char(36) DEFAULT '' COMMENT '归属',
  `group` tinyint(1) DEFAULT '0' COMMENT '导购分组',
  `email` varchar(128) DEFAULT '' COMMENT '用户邮箱',
  `searchConfig` text NOT NULL COMMENT '采购搜索条件',
  `version` varchar(10) DEFAULT NULL COMMENT '系统版本号',
  `allowance` int(10) DEFAULT NULL,
  `allowance_updated_at` int(11) DEFAULT NULL,
  PRIMARY KEY (`id`),
  UNIQUE KEY `index_mobile` (`mobile`) USING BTREE COMMENT '用户手机',
  KEY `index_status` (`status`) USING BTREE COMMENT '用户状态 0 正常 1 停用 2 锁定',
  KEY `index_type` (`type`) USING BTREE COMMENT '用户类型 1 客服 2 加盟商 3 供应商',
  KEY `index_created` (`created`) USING BTREE COMMENT '创建时间',
  KEY `index_modified` (`modified`) USING BTREE,
  KEY `index_role` (`role`) USING BTREE,
  KEY `index_isDel` (`isDel`) USING BTREE,
  KEY `index_refId` (`refId`) USING BTREE
) ENGINE=InnoDB AUTO_INCREMENT=1286 DEFAULT CHARSET=utf8 COMMENT='后台登陆用户表';<br><br>CREATE TABLE `widget` (
  `id` int(10) NOT NULL,
  `name` varchar(50) DEFAULT NULL COMMENT '小部件名称',
  `author` varchar(20) DEFAULT NULL COMMENT '作者',
  `status` tinyint(1) DEFAULT NULL COMMENT '状态：1启用，0禁用，2卸载',
  `routeName` varchar(50) DEFAULT NULL COMMENT '小部件路由',
  `params` text COMMENT '配置参数',
  PRIMARY KEY (`id`)
) ENGINE=InnoDB DEFAULT CHARSET=utf8;<br><br>COMMIT;SET FOREIGN_KEY_CHECKS = 1;</br></br>